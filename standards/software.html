<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html" /><link rel="search" title="Search" href="../search.html" /><link rel="next" title="Maintenance" href="../maintenance/README.html" /><link rel="prev" title="Electronics Design Guidelines" href="electronics.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Software Standards - Perseus V2 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../_static/collapsible-lists/css/tree_view.css?v=a885cde7" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">Perseus V2  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  
  <span class="sidebar-brand-text">Perseus V2  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../home/docs-structure.html">Documentation Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../home/getting-started.html">Getting Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Architecture</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../architecture/can-bus.html">CAN Bus Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/electrical.html">Electrical Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/network.html">Details and attributes of Perseus’s Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/software.html">Software Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Standards</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Standards</a></li>
<li class="toctree-l1"><a class="reference internal" href="electronics.html">Electronics Design Guidelines</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Software Standards</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Maintenance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/README.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/documentation.html">Documentation Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintenance/software.html">Software Maintenance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Code Documentation</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../generated/root.html">Code Documentation</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Code Documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../generated/namespace_hi_can.html">Namespace hi_can</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/namespace_hi_can__addresses.html">Namespace hi_can::addresses</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/namespace_hi_can__addresses__drive.html">Namespace hi_can::addresses::drive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/namespace_input_devices.html">Namespace input_devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/namespace_input_devices__generic_controller.html">Namespace input_devices::generic_controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/namespace_input_devices__xbox_controller.html">Namespace input_devices::xbox_controller</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/namespace_mapping_using_slam_toolbox.html">Namespace mapping_using_slam_toolbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/namespace_std__chrono.html">Namespace std::chrono</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/namespace_xbox_controller_launch.html">Namespace xbox_controller_launch</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/structhi__can_1_1hi__can__address__t.html">Struct hi_can_address_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/structhi__can_1_1PacketManager_1_1callback__config__t.html">Struct PacketManager::callback_config_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/structhi__can_1_1PacketManager_1_1callback__data__t.html">Struct PacketManager::callback_data_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/structhi__can_1_1PacketManager_1_1transmit__config__t.html">Struct PacketManager::transmit_config_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/structhi__can_1_1PacketManager_1_1transmit__data__t.html">Struct PacketManager::transmit_data_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/structhi__can_1_1vesc__address__t.html">Struct vesc_address_t</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classFdWrapper.html">Class FdWrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classhi__can_1_1CanInterface.html">Class CanInterface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classhi__can_1_1FilteredCanInterface.html">Class FilteredCanInterface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classhi__can_1_1NetworkClient.html">Class NetworkClient</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classhi__can_1_1NetworkServer.html">Class NetworkServer</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classhi__can_1_1Packet.html">Class Packet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classhi__can_1_1PacketManager.html">Class PacketManager</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classhi__can_1_1RawCanInterface.html">Class RawCanInterface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classhi__can_1_1SoftwareFilteredCanInterface.html">Class SoftwareFilteredCanInterface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/classinput__devices_1_1xbox__controller_1_1XboxControllerNode.html">Class XboxControllerNode</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/function_generic__controller_8py_1a51d704bdb6e79170e29fdaf7a3bee9da.html">Function input_devices::generic_controller::main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/function_xbox__controller_8py_1a00ebf7d3afacd199ace117b0e26d69f0.html">Function input_devices::xbox_controller::main</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/function_main_8cpp_1ae66f6b31b5ad750f1fe042a706a4e3d4.html">Function main()</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/function_beacon_8cpp_1a3c04138a5bfe5d72780bb7e82a18e627.html">Function main(int, char **)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/function_drive_8cpp_1a3c04138a5bfe5d72780bb7e82a18e627.html">Function main(int, char **)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/function_excavation_8cpp_1a3c04138a5bfe5d72780bb7e82a18e627.html">Function main(int, char **)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/function_mapping__using__slam__toolbox_8launch_8py_1a67bcf68dadb3392668e2da8da65c5d90.html">Function mapping_using_slam_toolbox::generate_launch_description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/function_fd__wrapper_8cpp_1ae18e498ea5e0f56245f661e154bf496b.html">Function swap</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/function_xbox__controller__launch_8py_1a1458a93322ee60e3c8ae88e415588a05.html">Function xbox_controller_launch::generate_launch_description</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1a11b2a494674a863c29c6d715fe2466b4.html">Variable hi_can::CANLIB_DEVICE_ADDRESS_BITS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1a364c367bf6a56754de22c9859ead7400.html">Variable hi_can::CANLIB_DEVICE_ADDRESS_POS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1ac8af06649fc39c8bf2436a2c694f9637.html">Variable hi_can::CANLIB_GROUP_ADDRESS_BITS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1aa12904cb0c25680c3a0bc8925b6eb1ab.html">Variable hi_can::CANLIB_GROUP_ADDRESS_POS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1a4961cd9591efc9d7b2e7e88376b296c8.html">Variable hi_can::CANLIB_PARAM_ADDRESS_BITS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1a7d68852f262a651b52d2072ea845b591.html">Variable hi_can::CANLIB_PARAM_ADDRESS_POS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1a2a3c59bbddf1b8c55f99b8978f09b698.html">Variable hi_can::CANLIB_SUBSYSTEM_ADDRESS_BITS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1a5edcf9ed31e4efd3ecba03a271149211.html">Variable hi_can::CANLIB_SUBSYSTEM_ADDRESS_POS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1ac8a4454e71b1b1d188a764261097cbfd.html">Variable hi_can::CANLIB_SYSTEM_ADDRESS_BITS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1afe870a8a642fcd625137e014ae2682ef.html">Variable hi_can::CANLIB_SYSTEM_ADDRESS_POS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1aa5c8e0fa3786193c03f0c3f2bb4806ba.html">Variable hi_can::MAX_ADDRESS</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/variable_hi__can__address_8hpp_1a65803fac77b2aac606188789d4b39408.html">Variable hi_can::MAX_PACKET_LEN</a></li>
<li class="toctree-l2"><a class="reference internal" href="../generated/typedef_hi__can__address_8hpp_1a1f6ef01d3aeb03e825cc2e90973ff3b9.html">Typedef hi_can::can_address_t</a></li>
</ul>
</li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/standards/software.md.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="software-standards">
<h1>Software Standards<a class="headerlink" href="#software-standards" title="Link to this heading">¶</a></h1>
<p>This document is intended to codify a set of standards and practices for developing high-quality and interoperable software and firmware across the QUT Robotics ROAR team. Before writing any software, you should have fully read through both the <a class="reference internal" href="#general-software-standards">General</a> and language-specific (<a class="reference internal" href="#c-standards">C++</a> or <a class="reference internal" href="#python-standards">Python</a>) sections of this document. If you’re writing ROS code, you should also have read through the <a class="reference internal" href="#ros-standards">ROS</a> section. If you don’t fully understand some of the topics being referenced, feel free to ask questions in Discord, we’ll be happy to help. If enough people have the same questions, we’ll edit this document to add explanations.</p>
<p>This document is heavily based off the <a class="reference external" href="https://wiki.openstack.org/wiki/CppCodingStandards">OpenStack C++ standards</a>.</p>
<section id="general-software-standards">
<h2>General Software Standards<a class="headerlink" href="#general-software-standards" title="Link to this heading">¶</a></h2>
<section id="general-naming">
<h3>General Naming<a class="headerlink" href="#general-naming" title="Link to this heading">¶</a></h3>
<p>Almost everything in <a class="reference external" href="https://www.youtube.com/watch?v=-J3wNP6u5YU">Naming Things in Code</a> applies to ROAR code. I highly recommend checking out <em>all</em> of his (<a class="reference external" href="https://www.youtube.com/&#64;CodeAesthetic/videos">CodeAesthetic’s</a>) videos - they’re all excellent, and almost everything is applicable here. They explain many of the <em>principles</em> behind why certain rules are in this document.</p>
<p>The one exception to this video is abbreviations, as documented below.</p>
<section id="spelling">
<h4>Spelling<a class="headerlink" href="#spelling" title="Link to this heading">¶</a></h4>
<p>Use American spelling for names - color instead of colour, serialize instead of serialise, etc. This is because most pre-existing code uses American spelling, and this will keep consistency with it.</p>
</section>
<section id="abbreviations">
<h4>Abbreviations<a class="headerlink" href="#abbreviations" title="Link to this heading">¶</a></h4>
<p>Use minimal abbreviations. Some things are either extremely common, such as the use of <code class="docutils literal notranslate"><span class="pre">i</span></code> as an index variable in a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop, or language suggested such as <code class="docutils literal notranslate"><span class="pre">it</span></code> for <code class="docutils literal notranslate"><span class="pre">iterator</span></code>, but overall if you’re abbreviating something, you’re probably making a mistake.</p>
<section id="acceptable">
<h5>Acceptable<a class="headerlink" href="#acceptable" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">speed_settings_t</span><span class="w"> </span><span class="n">currentSpeeds</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="incorrect">
<h5>Incorrect<a class="headerlink" href="#incorrect" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">speed_settings_t</span><span class="w"> </span><span class="n">curSpeeds</span><span class="p">;</span>
<span class="n">speed_settings_t</span><span class="w"> </span><span class="n">curSpds</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="exceptions">
<h5>Exceptions<a class="headerlink" href="#exceptions" title="Link to this heading">¶</a></h5>
<p>Below is a list of some of the common exceptions to this rule.</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Abbreviation</p></th>
<th class="head"><p>Full name</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">i</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">index</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">idx</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">index</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">it</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">iterator</span></code></p></td>
<td><p>Language standard (C++)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">pos</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">position</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">tmp</span></code>/<code class="docutils literal notranslate"><span class="pre">temp</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">temporary</span></code></p></td>
<td><p>Should not be used as a standalone name though, only as prefixes. Also should not be used around code that references temperatures as that gets confusing quickly</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">max</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">maximum</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">min</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">minimum</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">prev</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">previous</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">init</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">initialize</span></code></p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<section id="units-in-variable-names">
<h4>Units in variable names<a class="headerlink" href="#units-in-variable-names" title="Link to this heading">¶</a></h4>
<p>Units in variable names should be avoided, and a type which specifies or eliminates the units should be used instead. However, if this is unavoidable or impractical, units are exempted from abbreviation rules.</p>
</section>
<section id="descriptiveness">
<h4>Descriptiveness<a class="headerlink" href="#descriptiveness" title="Link to this heading">¶</a></h4>
<p>Variable names should be descriptive and describe what they do/are.</p>
<section id="id1">
<h5>Acceptable<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">speed_settings_t</span><span class="w"> </span><span class="n">targetSpeeds</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id2">
<h5>Incorrect<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">speed_settings_t</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span><span class="w"> </span><span class="c1">// bad! Both abbreviated and not descriptive</span>
<span class="n">speed_settings_t</span><span class="w"> </span><span class="n">speeds</span><span class="p">;</span><span class="w"> </span><span class="c1">// what speeds?</span>
<span class="n">speed_settings_t</span><span class="w"> </span><span class="n">target</span><span class="p">;</span><span class="w"> </span><span class="c1">// target what?</span>
</pre></div>
</div>
</section>
</section>
<section id="booleans">
<h4>Booleans<a class="headerlink" href="#booleans" title="Link to this heading">¶</a></h4>
<p>Boolean (true/false) variables should have a verb prefix indicating that they are a boolean, and what it does.</p>
<section id="id3">
<h5>Acceptable<a class="headerlink" href="#id3" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">isValid</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">shouldExit</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">hasSettings</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id4">
<h5>Incorrect<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">bool</span><span class="w"> </span><span class="n">valid</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">exit</span><span class="p">;</span>
<span class="kt">bool</span><span class="w"> </span><span class="n">settings</span><span class="p">;</span>
</pre></div>
</div>
</section>
</section>
<section id="constants">
<h4>Constants<a class="headerlink" href="#constants" title="Link to this heading">¶</a></h4>
<p>Regardless of the language, constants should be named with <code class="docutils literal notranslate"><span class="pre">SCREAMING_SNAKE_CASE</span></code> and marked <code class="docutils literal notranslate"><span class="pre">const</span></code> if applicable. The constants should not be prefixed with types or any information other than their name.</p>
</section>
</section>
<section id="class-methods-and-variables">
<h3>Class Methods and Variables<a class="headerlink" href="#class-methods-and-variables" title="Link to this heading">¶</a></h3>
<section id="class-method-names">
<h4>Class method names<a class="headerlink" href="#class-method-names" title="Link to this heading">¶</a></h4>
<p>Method names should describe the <em>action</em> that they perform, concisely and unambiguously. They should generally be in verb[Noun] format.</p>
<section id="id5">
<h5>Acceptable<a class="headerlink" href="#id5" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">getMaxSpeed</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setMaxSpeed</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">maxSpeed</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// note that write() may also be acceptable here depending on the context</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">writeToDisk</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="visibility">
<h4>Visibility<a class="headerlink" href="#visibility" title="Link to this heading">¶</a></h4>
<p>All member variables inside a class should be private. If code outside the class needs access to the variables, write accessors and mutators. Specify <em>all</em> visibility - in C++ classes default to <code class="docutils literal notranslate"><span class="pre">private</span></code> visibility and structs to <code class="docutils literal notranslate"><span class="pre">public</span></code>, but as structs should contain no functionality, this is a nonissue for them.</p>
<section id="correct">
<h5>Correct<a class="headerlink" href="#correct" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">getMaxSpeed</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setMaxSpeed</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">maxSpeed</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// note that write() may also be acceptable here depending on the context</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">writeToDisk</span><span class="p">();</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">_maxSpeed</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="member-ordering">
<h4>Member Ordering<a class="headerlink" href="#member-ordering" title="Link to this heading">¶</a></h4>
<p>Methods and variables inside a class should be ordered as so:</p>
<section id="public">
<h5>Public<a class="headerlink" href="#public" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>Types</p></li>
<li><p>Constructors and destructor</p></li>
<li><p>Handler functions</p></li>
<li><p>Accessors/mutators (preferably paired if applicable)</p></li>
<li><p>Other functions</p></li>
</ul>
</section>
<section id="private">
<h5>Private<a class="headerlink" href="#private" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p>Types</p></li>
<li><p>Internal methods</p></li>
<li><p>Variables</p></li>
</ul>
</section>
<section id="id6">
<h5>Correct<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="k">typedef</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">rpm_t</span><span class="p">;</span><span class="w"> </span><span class="c1">// this is just an example, doing a typedef for this is unnecessary</span>

<span class="w">    </span><span class="n">Settings</span><span class="p">();</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">getMaxSpeed</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setMaxSpeed</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">maxSpeed</span><span class="p">);</span>

<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">write</span><span class="p">();</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">rpm_t</span><span class="w"> </span><span class="n">_calculateMaxRpm</span><span class="p">();</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">_maxSpeed</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="private-methods-and-variables">
<h4>Private Methods and Variables<a class="headerlink" href="#private-methods-and-variables" title="Link to this heading">¶</a></h4>
<p>All private members and variables of a class should be prefixed with an underscore (<code class="docutils literal notranslate"><span class="pre">_</span></code>).</p>
<section id="id7">
<h5>Acceptable<a class="headerlink" href="#id7" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">_loadDefaults</span><span class="p">();</span>

<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">_maxSpeed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="mutators-and-accessors">
<h4>Mutators and Accessors<a class="headerlink" href="#mutators-and-accessors" title="Link to this heading">¶</a></h4>
<p>If a getter or setter for a variable is written, they must be prefixed with <code class="docutils literal notranslate"><span class="pre">get</span></code> or <code class="docutils literal notranslate"><span class="pre">set</span></code>, and the name of the function should be the same as that of the internal variable it accesses.</p>
<p>When accessing aggregate classes (lists, maps, etc.), the function should be prefixed with <code class="docutils literal notranslate"><span class="pre">add</span></code>, <code class="docutils literal notranslate"><span class="pre">get</span></code>, <code class="docutils literal notranslate"><span class="pre">remove</span></code>, or <code class="docutils literal notranslate"><span class="pre">set</span></code> (depending on the type of the aggregate, other prefixes may be appropriate), and the plurality of the variable modified as needed (such as <code class="docutils literal notranslate"><span class="pre">getConfiguration</span></code> accessing <code class="docutils literal notranslate"><span class="pre">_configurations</span></code>).</p>
<p>Note that for some classes, it may not make sense for them to be mutatable, and in these cases, providing only getters is perfectly acceptable.</p>
<section id="id8">
<h5>Acceptable<a class="headerlink" href="#id8" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Settings</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="c1">// both referencing _maxSpeed</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">getMaxSpeed</span><span class="p">();</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setMaxSpeed</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">maxSpeed</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// adds a member to the _speedConfigurations member</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">addSpeedConfiguration</span><span class="p">(</span><span class="n">speed_settings_t</span><span class="w"> </span><span class="n">configuration</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// gets a member from the _speedConfigurations member</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">getSpeedConfiguration</span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">idx</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="scoping">
<h3>Scoping<a class="headerlink" href="#scoping" title="Link to this heading">¶</a></h3>
<section id="globals">
<h4>Globals<a class="headerlink" href="#globals" title="Link to this heading">¶</a></h4>
<p>There should be no project-wide global variables (constants are not <em>variable</em> so use them as needed). Use functions to interact between modules.</p>
</section>
<section id="class-data-members">
<h4>Class data members<a class="headerlink" href="#class-data-members" title="Link to this heading">¶</a></h4>
<p>All data members should be private, except in behaviour-less aggregates (C-style structs).</p>
</section>
</section>
<section id="files">
<h3>Files<a class="headerlink" href="#files" title="Link to this heading">¶</a></h3>
<section id="naming">
<h4>Naming<a class="headerlink" href="#naming" title="Link to this heading">¶</a></h4>
<p>Files should be named with <code class="docutils literal notranslate"><span class="pre">snake_case</span></code>. If there is a pre-existing standard for the file names, follow that. In the case of code, the filename should describe the code within it. For other files, the filename should describe its contents. The filename of date-specific data should start with the ISO 8601 date that the data was recorded (eg <code class="docutils literal notranslate"><span class="pre">2024-08-01_can_dump</span></code>).</p>
</section>
<section id="single-responsibility-principle">
<h4>Single Responsibility Principle<a class="headerlink" href="#single-responsibility-principle" title="Link to this heading">¶</a></h4>
<p>Every class/module/library should only have a <em>single responsibility</em>. If you’re maintaining otherwise disparate code together, that’s a sign that you may need to refactor and split that code out.</p>
</section>
<section id="modules">
<h4>Modules<a class="headerlink" href="#modules" title="Link to this heading">¶</a></h4>
<p>Each file should be a self-contained <em>module</em> as far as possible, interacting with other modules through the API that they expose. The file name (both header and source) should be the name of the module - such as a module named <code class="docutils literal notranslate"><span class="pre">ui</span></code> handling core UI code. Making folders to keep module code organised is also acceptable.</p>
</section>
<section id="extensions">
<h4>Extensions<a class="headerlink" href="#extensions" title="Link to this heading">¶</a></h4>
<p>C source files should end with <code class="docutils literal notranslate"><span class="pre">.c</span></code>, C header files with <code class="docutils literal notranslate"><span class="pre">.h</span></code>, C++ source files with <code class="docutils literal notranslate"><span class="pre">.cpp</span></code>, C++ header files with <code class="docutils literal notranslate"><span class="pre">.hpp</span></code>, and Python files with <code class="docutils literal notranslate"><span class="pre">.py</span></code>. Whilst using the <code class="docutils literal notranslate"><span class="pre">.h</span></code> extension will work for C++ headers, <code class="docutils literal notranslate"><span class="pre">.hpp</span></code> specifically denotes that it is a C++ header and is thus used in this project. Additionally, the <code class="docutils literal notranslate"><span class="pre">.cpp</span></code> extension is used for C++ source files over <code class="docutils literal notranslate"><span class="pre">.cc</span></code> - it’s clearer what the file is and is much more common.</p>
<section id="id9">
<h5>Correct<a class="headerlink" href="#id9" title="Link to this heading">¶</a></h5>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.
├── include
│  └── settings.hpp
└── src
   └── settings.cpp
</pre></div>
</div>
</section>
<section id="id10">
<h5>Incorrect<a class="headerlink" href="#id10" title="Link to this heading">¶</a></h5>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>.
├── include
│  └── settings.h
└── src
   └── settings.cc
</pre></div>
</div>
</section>
</section>
</section>
<section id="types">
<h3>Types<a class="headerlink" href="#types" title="Link to this heading">¶</a></h3>
<section id="enums">
<h4>Enums<a class="headerlink" href="#enums" title="Link to this heading">¶</a></h4>
<p>Any <code class="docutils literal notranslate"><span class="pre">enum</span></code> <em>types</em> should be named in <code class="docutils literal notranslate"><span class="pre">snake_case</span></code>, and the actual <code class="docutils literal notranslate"><span class="pre">enum</span></code> <em>values</em> should be named in <code class="docutils literal notranslate"><span class="pre">SCREAMING_SNAKE_CASE</span></code> since they are constants.</p>
<p>C/C++ <code class="docutils literal notranslate"><span class="pre">enum</span></code>s should have a prefix containing the type of the <code class="docutils literal notranslate"><span class="pre">enum</span></code> (see the example), but C++ <code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">class</span></code>es (or Python <code class="docutils literal notranslate"><span class="pre">enum</span></code>s) should not be prefixed, as they are accessed through the base class.</p>
<section id="id11">
<h5>Acceptable<a class="headerlink" href="#id11" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span><span class="w"> </span><span class="nc">speed_options</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">SPEED_SLOW</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="n">SPEED_NORMAL</span><span class="p">,</span>
<span class="w">    </span><span class="n">SPEED_FAST</span><span class="p">,</span>
<span class="w">    </span><span class="n">SPEED_MAX</span>
<span class="p">};</span>
<span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">directions</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">FORWARD</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="n">NEUTRAL</span><span class="p">,</span>
<span class="w">    </span><span class="n">REVERSE</span><span class="p">,</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="design-guidelines">
<h3>Design Guidelines<a class="headerlink" href="#design-guidelines" title="Link to this heading">¶</a></h3>
<section id="versioning">
<h4>Versioning<a class="headerlink" href="#versioning" title="Link to this heading">¶</a></h4>
<p>Follow <a class="reference external" href="https://www.taoensso.com/break-versioning">BreakVer</a>. That is, versions should follow the form <code class="docutils literal notranslate"><span class="pre">major.minor.nonbreaking[-optional-qualifier]</span></code>. Nonbreaking updates should be exactly what they say - non-breaking. Updating version bumps should always be safe (and recommended) to perform. Minor updates <em>may</em> break code in a <em>minor</em> way - read the changelog to see if you’re affected. Major updates might break code in a <em>major</em> way - read the changes!</p>
<p>Whenever you perform a major (possibly breaking) change, update the major version number. Whenever you make a breaking minor change, update the minor version number. For non-breaking changes, update either the non-breaking or minor version numbers as appropriate.</p>
<p>Whenever a version number is incremented, all lower numbers should be reset to zero - that is, a major version bump from <code class="docutils literal notranslate"><span class="pre">1.1.1</span></code> would be <code class="docutils literal notranslate"><span class="pre">2.0.0</span></code>.</p>
</section>
<section id="warnings-are-not-acceptable">
<h4>Warnings are not acceptable<a class="headerlink" href="#warnings-are-not-acceptable" title="Link to this heading">¶</a></h4>
<p>If the compiler (or linter) is complaining about something, it’s almost certainly right. Fix the warnings before raising a PR to merge code onto the main branch. This not only helps to enforce a higher code quality, but also to make new (and possibly more important) warnings much more obvious when they <em>do</em> occur.</p>
</section>
<section id="keep-functions-short">
<h4>Keep functions short<a class="headerlink" href="#keep-functions-short" title="Link to this heading">¶</a></h4>
<p>Short functions are easier to debug, easier to test, and easier to maintain. Long functions may be appropriate for the problem, but much of the time it will be easier to split the function up. There will be no hard limit enforced, but the OpenStack standard recommends starting to think about refactoring after 40 lines. After about 60 lines, the function is starting to get long and there’s a decent chance that it should be refactored - note that refactoring should only occur if it wouldn’t harm the structure of the program! If a function has better logical flow, or the problem can’t be split up, then large functions are fine - but problems often <em>can</em> be split up.</p>
<p>Long functions can also be hard to maintain, especially when adding features. The longer a function is, the more context gets introduced that a programmer must be aware of and work around. Making changes while not aware of that context could introduce bugs.</p>
<p>As a rule of thumb, if your function has more than 3 levels of indentation, have a look at it and consider if it would be made clearer by refactoring (see <a class="reference external" href="https://www.youtube.com/watch?v=CFRhGnuXG-4">Why You Shouldn’t Nest Your Code</a>). Of course there are many exceptions to this, but it often serves as a good starting point. This is because each level of indentation generally indicates a branching control flow. At more than 3 levels of indentation, there’s likely a fairly large number of different control flows, all of which the end programmer has to keep in mind when modifying the code.</p>
<p>In short, prefer short and focused functions with a single responsibility.</p>
</section>
<section id="make-everything-const">
<h4>Make everything <code class="docutils literal notranslate"><span class="pre">const</span></code><a class="headerlink" href="#make-everything-const" title="Link to this heading">¶</a></h4>
<p>If it can be made <code class="docutils literal notranslate"><span class="pre">const</span></code> (or equivalent if not in C++), do so - both variables and methods. If a method doesn’t modify internal data, make it const. This prevents a whole class of bugs where variables are modified which were not expected to be modified.</p>
</section>
<section id="prefer-composition-to-inheritance">
<h4>Prefer composition to inheritance<a class="headerlink" href="#prefer-composition-to-inheritance" title="Link to this heading">¶</a></h4>
<p>See <a class="reference external" href="https://www.youtube.com/watch?v=hxGOiiR9ZKg">The Flaws of Inheritance</a> - the TL;DW is that inheritance breaks down when you want to do something different from what the base class intended. If instead each class is separated and takes what was the parent class as an input, the “implementation overlap” is significantly reduced. Interfaces can also help with this, further reducing implementation-specific details.</p>
</section>
<section id="prefer-providing-abstract-interfaces">
<h4>Prefer providing abstract interfaces<a class="headerlink" href="#prefer-providing-abstract-interfaces" title="Link to this heading">¶</a></h4>
<p>Interfaces should contain no implementation code - that is, all members should be <em>abstract</em>.</p>
</section>
<section id="make-interfaces-easy-to-use-and-hard-to-use-incorrectly">
<h4>Make interfaces easy to use and hard to use incorrectly<a class="headerlink" href="#make-interfaces-easy-to-use-and-hard-to-use-incorrectly" title="Link to this heading">¶</a></h4>
<p>If there are “gotchas” when using the interface, then you should consider re-designing the interface so that they are instead eliminated. A common problem is that of putting too much responsibility in a single interface - classes can inherit from multiple interfaces, don’t be afraid to split things up! Inheriting multiple smaller, focused interfaces is better than inheriting one over-scoped interface that we don’t actually need everything in, which will cause bugs down the line.</p>
</section>
<section id="prefer-minimal-classes-over-monolithic-classes">
<h4>Prefer minimal classes over monolithic classes<a class="headerlink" href="#prefer-minimal-classes-over-monolithic-classes" title="Link to this heading">¶</a></h4>
<p>Multiple smaller classes with well-defined interfaces and APIs will be easier to maintain than a single large class which has hard-to-define links between its components. If you <em>do</em> need to define a monolithic class (sometimes good reasons do exist), then be very clear as to why you’re doing so, and ensure that data flow is well defined.</p>
</section>
<section id="be-clear-what-kind-of-class-you-re-writing">
<h4>Be clear what kind of class you’re writing<a class="headerlink" href="#be-clear-what-kind-of-class-you-re-writing" title="Link to this heading">¶</a></h4>
<p>If it’s not clear what kind of class you’re writing, then that’s a suggestion that perhaps your class needs to be refactored. Maybe the class itself needs to be more specific but implement a new interface, or it should be split up into multiple different classes.</p>
</section>
<section id="treat-class-design-as-type-design">
<h4>Treat class design as type design<a class="headerlink" href="#treat-class-design-as-type-design" title="Link to this heading">¶</a></h4>
<p>See <a class="reference external" href="https://blog.ycshao.com/2012/11/23/effective-c-item-19-treat-class-design-as-type-design/">Effective C++ item 19: Treat class design as type design</a>. It primarily comes down to:</p>
<ul class="simple">
<li><p>Consider if you <em>really</em> need what you’re about to create</p></li>
<li><p>How will it be used?</p></li>
<li><p>What restrictions does it have?</p></li>
<li><p>Is it useful?</p></li>
</ul>
</section>
<section id="avoid-inheriting-from-classes-that-were-not-designed-to-be-base-classes">
<h4>Avoid inheriting from classes that were not designed to be base classes<a class="headerlink" href="#avoid-inheriting-from-classes-that-were-not-designed-to-be-base-classes" title="Link to this heading">¶</a></h4>
<p>If a class was not <em>designed</em> to be a base class, there are likely to be internal implementation details that inheriting from it will either cause to break, or will break your derived class.</p>
</section>
<section id="public-inheritance-models-is-a">
<h4>Public inheritance models “is a”<a class="headerlink" href="#public-inheritance-models-is-a" title="Link to this heading">¶</a></h4>
<p>What this means is that public inheritance should be close to interfaces - if a class publicly inherits from another, it “is an implementation” of the base class and should behave as such. See also <a class="reference internal" href="#prefer-composition-to-inheritance">composition</a>.</p>
</section>
<section id="public-inheritance-is-substitutability">
<h4>Public inheritance is substitutability<a class="headerlink" href="#public-inheritance-is-substitutability" title="Link to this heading">¶</a></h4>
<p>Inherit, not to reuse, but to be reused. This means that, like when implementing interfaces, there should be no unexpected behaviour if using a derived class like the base class it inherits from.</p>
</section>
<section id="private-inheritance-models-is-implemented-in-terms-of">
<h4>Private inheritance models “is implemented in terms of”<a class="headerlink" href="#private-inheritance-models-is-implemented-in-terms-of" title="Link to this heading">¶</a></h4>
<p>If a class inherits privately, it should be because it is making use of features from the base class, they do not necessarily have to have conceptual relationships.</p>
</section>
<section id="don-t-give-away-your-internals">
<h4>Don’t give away your internals<a class="headerlink" href="#don-t-give-away-your-internals" title="Link to this heading">¶</a></h4>
<p>Code making use of a class (or module) should not care about its internal implementation. If it does, that means that the API for that class needs to be redesigned so that internals are no longer exposed.</p>
</section>
<section id="practise-safe-overriding">
<h4>Practise safe overriding<a class="headerlink" href="#practise-safe-overriding" title="Link to this heading">¶</a></h4>
<p>When overriding virtual functions (or equivalents in other languages), ensure that substitutability is preserved - that is, the overridden function can be used in the same contexts as the original. This means things like not changing default arguments, preserving pre- and post-conditions, and being careful not to hide overloaded functions.</p>
</section>
<section id="prefer-simple-code-over-clever-code">
<h4>Prefer simple code over “clever” code<a class="headerlink" href="#prefer-simple-code-over-clever-code" title="Link to this heading">¶</a></h4>
<p>Unless it’s actively a performance issue (in which case it should be clearly commented with proof), prefer simpler code that’s easier to understand and debug over “clever” code which has small benefits.</p>
</section>
<section id="use-sensible-defaults">
<h4>Use sensible defaults<a class="headerlink" href="#use-sensible-defaults" title="Link to this heading">¶</a></h4>
<p>All values which <em>can</em> have default values/initialisers provided should. The default initialisers should be sensible (that is, result in a valid data type). For example, a counter of some kind in a class can be default initialised to <code class="docutils literal notranslate"><span class="pre">0</span></code> and therefore does not need to be specified in the constructor initialiser lists.</p>
<p>This also goes for <em>programs</em> you write, not just functions and classes - for example, a ROS node or launch file should work “as expected” by default, with options needing to be <em>manually set</em> to change its behaviour from “working normally”.</p>
</section>
<section id="avoid-magic-numbers">
<h4>Avoid magic numbers<a class="headerlink" href="#avoid-magic-numbers" title="Link to this heading">¶</a></h4>
<p>There should be no “bare” magic numbers in your code. They should be one of the following instead:</p>
<ul class="simple">
<li><p>Commented - easiest but also worst solution</p></li>
<li><p>Converted to a <em>named</em> constant</p></li>
<li><p>Explained by the variable names, such as <code class="docutils literal notranslate"><span class="pre">outputRevolutionsPerSecond</span> <span class="pre">=</span> <span class="pre">inputRpm*60;</span></code></p></li>
</ul>
</section>
</section>
<section id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">¶</a></h3>
<p>All code in the project should be documented with <a class="reference external" href="https://www.doxygen.nl/manual/docblocks.html">Doxygen</a> comments. This is only <em>required</em> for top-level files/classes, but is <em>strongly encouraged</em> for the entire public API. Finally, it is preferred that as much as possible is documented. The documentation priority list is:</p>
<ul class="simple">
<li><p>File/module/class (purpose, usage, etc.)</p></li>
<li><p>Public API</p></li>
<li><p>Internal API/functions</p></li>
<li><p>Internal types (optional if self-descriptive enough)</p></li>
<li><p>Internal variables (also optional if self-descriptive)</p></li>
</ul>
</section>
</section>
<section id="c-standards">
<h2>C++ Standards<a class="headerlink" href="#c-standards" title="Link to this heading">¶</a></h2>
<p>Many of the items covered in this document are also reiterated <a class="reference external" href="http://micro-os-plus.github.io/develop/sutter-101/">here</a> with different wording, as well as several other things being covered. Have a look and see if it’s covered in the linked page if you’re confused about something, it might explain it differently.</p>
<section id="header-files">
<h3>Header Files<a class="headerlink" href="#header-files" title="Link to this heading">¶</a></h3>
<section id="use-c-includes-over-the-c-includes">
<h4>Use C++ includes over the C includes<a class="headerlink" href="#use-c-includes-over-the-c-includes" title="Link to this heading">¶</a></h4>
<p>This means using <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;cstlib&gt;</span></code> instead of <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;stdlib.h&gt;</span></code> and similar. If you’re including a standard library file ending in <code class="docutils literal notranslate"><span class="pre">.h</span></code>, chances are it’s a C include and you should be using the <code class="docutils literal notranslate"><span class="pre">&lt;clibname&gt;</span></code> alternative.</p>
<section id="id12">
<h5>Correct<a class="headerlink" href="#id12" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##include &lt;cstdint&gt;</span>
</pre></div>
</div>
</section>
<section id="id13">
<h5>Incorrect<a class="headerlink" href="#id13" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##include &lt;stdint.h&gt; </span><span class="c1">// don&#39;t do this</span>
</pre></div>
</div>
</section>
</section>
<section id="include-types">
<h4>Include types<a class="headerlink" href="#include-types" title="Link to this heading">¶</a></h4>
<p>In C++, there are two types of <code class="docutils literal notranslate"><span class="pre">#include</span></code> directive - <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&lt;filename.hpp&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">#include</span> <span class="pre">&quot;filename.hpp&quot;</span></code>. The former searches for files on the compiler include path (eg STL headers, external libraries, etc) before project paths (if it searches project paths at all). Quoted include directives search the project paths first, <em>then</em> the system include paths. As such, include directives using quotes are to be used for files within the same project, and angle bracket includes should be used for everything else. This ensures that even in the event of a naming conflict, the correct file will usually be selected. It also serves to differentiate intention - that is, <em>using</em> a behaviour as opposed to (usually) <em>implementing</em> a behaviour.</p>
</section>
<section id="assume-nothing">
<h4>Assume nothing<a class="headerlink" href="#assume-nothing" title="Link to this heading">¶</a></h4>
<p>Make no assumptions about files being included before whatever you’re writing. If your header file needs another file to be included before it, <strong>do not</strong> assume that it will be included. Include it yourself. If you need a certain variable to be declared, declare it. If your code can be broken by including it into a different file, or with a different include order of files, it needs to be fixed.</p>
<section id="id14">
<h5>Correct<a class="headerlink" href="#id14" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##include &lt;cstdint&gt;</span>

<span class="kt">uint8_t</span><span class="w"> </span><span class="nf">adder</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">input</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="id15">
<h5>Incorrect<a class="headerlink" href="#id15" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// assumes that something includes &lt;cstdint&gt; before it!</span>

<span class="kt">uint8_t</span><span class="w"> </span><span class="nf">adder</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">input</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="don-t-pollute-the-namespace">
<h4>Don’t pollute the namespace<a class="headerlink" href="#don-t-pollute-the-namespace" title="Link to this heading">¶</a></h4>
<p>You should never use a <code class="docutils literal notranslate"><span class="pre">using</span></code> directive in a header. This goes for both <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">namespace</span></code> directives and specific symbol inclusion such as <code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">std::vector</span></code>.</p>
<section id="id16">
<h5>Correct<a class="headerlink" href="#id16" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##pragma once</span>

<span class="cp">##include &lt;cstdint&gt;</span>
<span class="cp">##include &lt;tuple&gt;</span>
<span class="cp">##include &lt;vector&gt;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">addSetting</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">_ids</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="n">_values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getSetting</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">index</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_pair</span><span class="p">(</span><span class="n">_ids</span><span class="p">[</span><span class="n">index</span><span class="p">],</span><span class="w"> </span><span class="n">_values</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_ids</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_values</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id17">
<h5>Incorrect<a class="headerlink" href="#id17" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##pragma once</span>

<span class="cp">##include &lt;cstdint&gt;</span>
<span class="cp">##include &lt;tuple&gt;</span>
<span class="cp">##include &lt;vector&gt;</span>

<span class="c1">// now everything after the inclusion of this file has to deal with the inclusion of the entire std namespace</span>
<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">std</span><span class="p">;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">addSetting</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">id</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">_ids</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">id</span><span class="p">);</span>
<span class="w">        </span><span class="n">_values</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">value</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="p">,</span><span class="w"> </span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">getSetting</span><span class="p">(</span><span class="kt">uint8_t</span><span class="w"> </span><span class="n">index</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">make_pair</span><span class="p">(</span><span class="n">_ids</span><span class="p">[</span><span class="n">index</span><span class="p">],</span><span class="w"> </span><span class="n">_values</span><span class="p">[</span><span class="n">index</span><span class="p">]);</span>
<span class="w">    </span><span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_ids</span><span class="p">;</span>
<span class="w">    </span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_values</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="use-include-guards">
<h4>Use include guards<a class="headerlink" href="#use-include-guards" title="Link to this heading">¶</a></h4>
<p>Put <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">once</span></code> as the first line of all headers. This prevents files from being included more than once in a file. Whilst technically <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">once</span></code> is compiler specific, it’s common enough that it’s effectively a standard, and all C++ code on the rover is compiled with <code class="docutils literal notranslate"><span class="pre">gcc</span></code> anyway making it a nonissue. You may have already seen the standard include guard pattern of</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##ifndef __MY_FILE_H</span>
<span class="cp">##define __MY_FILE_H</span>
<span class="c1">// code here...</span>
<span class="cp">##endif </span><span class="c1">// __MY_FILE_H</span>
</pre></div>
</div>
<p>or something similar - whilst this will work the exact same way, it is liable to programmer mistakes if a file gets moved, renamed, or copied, whereas the pragma directive doesn’t have these issues.</p>
<section id="id18">
<h5>Correct<a class="headerlink" href="#id18" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##pragma once</span>

<span class="cp">##include &lt;cstdint&gt;</span>

<span class="c1">// now if this file is included twice, there&#39;ll be an error since the class is declared twice</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id19">
<h5>Incorrect<a class="headerlink" href="#id19" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##include &lt;cstdint&gt;</span>

<span class="c1">// now if this file is included twice, there&#39;ll be an error since the class is declared twice</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Settings</span>
<span class="p">{</span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="id20">
<h3>Files<a class="headerlink" href="#id20" title="Link to this heading">¶</a></h3>
<section id="file-system-structure">
<h4>File System Structure<a class="headerlink" href="#file-system-structure" title="Link to this heading">¶</a></h4>
<p>Source code files should all be located under the <code class="docutils literal notranslate"><span class="pre">src/</span></code> directory inside the project, and include files under <code class="docutils literal notranslate"><span class="pre">include/</span></code>. If the application is a program, the entry point should be located inside a file named <code class="docutils literal notranslate"><span class="pre">main.cpp</span></code>. If, as in the case of ROS nodes, this is not applicable, name the source files according to what they <em>are</em> - this will primarily mean naming them with nouns and adjectives.</p>
<p>Libraries may need internal, private header files - if necessary, these should be present under a <code class="docutils literal notranslate"><span class="pre">priv_include</span></code> directory, and the builder/installer should be configured appropriately to not include them in final outputs.</p>
</section>
</section>
<section id="variable-declarations-and-naming-standards">
<h3>Variable Declarations and Naming Standards<a class="headerlink" href="#variable-declarations-and-naming-standards" title="Link to this heading">¶</a></h3>
<section id="capitalisation">
<h4>Capitalisation<a class="headerlink" href="#capitalisation" title="Link to this heading">¶</a></h4>
<p>Variables should be named in <code class="docutils literal notranslate"><span class="pre">camelCase</span></code>. The only exception to this rule is local static variables (that is, static within a function or class). These variables should be named in <code class="docutils literal notranslate"><span class="pre">snake_case</span></code> - this is to immediately signify to a programmer (who may not have seen the declaration) that they may behave differently to how they expect.</p>
</section>
<section id="variable-type-declarations">
<h4>Variable Type Declarations<a class="headerlink" href="#variable-type-declarations" title="Link to this heading">¶</a></h4>
<p>Use the format <code class="docutils literal notranslate"><span class="pre">[static]</span> <span class="pre">[const/volatile]</span> <span class="pre">type</span> <span class="pre">[*/&amp;]</span> <span class="pre">[const]</span></code> (in order, constant/volatile, type name, pointer/reference, constant pointer modifier). Whilst OpenStack recommends putting the type first, writing it this way reads and writes the same way that you would speak the type.</p>
</section>
<section id="id21">
<h4>Scoping<a class="headerlink" href="#id21" title="Link to this heading">¶</a></h4>
<p>Unless you have a <em>very good reason to</em>, all your global variables (inside a module) should be declared <code class="docutils literal notranslate"><span class="pre">static</span></code>, and all your internal functions <em>must</em> be declared <code class="docutils literal notranslate"><span class="pre">static</span></code>. This prevents a large number of bugs where the program may refuse to compile, variables may be inadvertently modified outside of their intended use, or internal functions called externally.</p>
<p>This is because the C++ (and C) compiler has <em>global</em> (project-wide) linkage by default for global variables and functions. The <code class="docutils literal notranslate"><span class="pre">static</span></code> modifier specifies that they are only valid <em>inside the file they’re declared in</em> and thus prevents them from being used in other files. Note that this only applies to <strong>global</strong> variables and functions!</p>
<section id="id22">
<h5>Correct<a class="headerlink" href="#id22" title="Link to this heading">¶</a></h5>
<section id="settings-cpp">
<h6>settings.cpp<a class="headerlink" href="#settings-cpp" title="Link to this heading">¶</a></h6>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##include &quot;settings.hpp&quot;</span>

<span class="k">static</span><span class="w"> </span><span class="n">settings_t</span><span class="w"> </span><span class="n">settings</span><span class="p">;</span>

<span class="k">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">loadSettingsFromFile</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="id23">
<h5>Incorrect<a class="headerlink" href="#id23" title="Link to this heading">¶</a></h5>
<section id="id24">
<h6>settings.cpp<a class="headerlink" href="#id24" title="Link to this heading">¶</a></h6>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">##include &quot;settings.hpp&quot;</span>

<span class="c1">// other code can modify settings now!</span>
<span class="n">settings_t</span><span class="w"> </span><span class="n">settings</span><span class="p">;</span>

<span class="c1">// and other code can also call loadSettingsFromFile, which could cause *really* bad side effects since you can call an un-declared function as long as it&#39;s defined somewhere</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">loadSettingsFromFile</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">};</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="namespaces">
<h4>Namespaces<a class="headerlink" href="#namespaces" title="Link to this heading">¶</a></h4>
<p>There is very little need for namespaces in ROAR software (except for common libraries such as <code class="docutils literal notranslate"><span class="pre">hi-can-lib</span></code> and associated libs under <code class="docutils literal notranslate"><span class="pre">hi_can</span></code>). However, if you do need a namespace, keep it to all lowercase single words, and if that’s impractical, multiple words of <code class="docutils literal notranslate"><span class="pre">snake_case</span></code> is also acceptable - just keep it as short as possible while remaining understandable.</p>
<section id="id25">
<h5>Acceptable<a class="headerlink" href="#id25" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">::</span><span class="n">hi_can</span>
<span class="o">::</span><span class="n">hi_can</span><span class="o">::</span><span class="n">drive</span>
<span class="o">::</span><span class="n">hi_can</span><span class="o">::</span><span class="n">drive</span><span class="o">::</span><span class="n">traction_control</span>
</pre></div>
</div>
</section>
<section id="id26">
<h5>Incorrect<a class="headerlink" href="#id26" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="o">::</span><span class="n">rover_libraries</span><span class="o">::</span><span class="n">drive</span>
<span class="o">::</span><span class="n">RoverLibraries</span>
</pre></div>
</div>
</section>
</section>
<section id="class-names">
<h4>Class names<a class="headerlink" href="#class-names" title="Link to this heading">¶</a></h4>
<p>Class names should always be <code class="docutils literal notranslate"><span class="pre">PascalCase</span></code> and <em>describe</em> what they do, with minimal abbreviation. They also should not be prefixed (especially not with <code class="docutils literal notranslate"><span class="pre">cls</span></code>!). Interfaces (abstract base classes) should probably be named with an adjective describing the interface, such as <code class="docutils literal notranslate"><span class="pre">Serializable</span></code>.</p>
<section id="common-pitfalls">
<h5>Common Pitfalls<a class="headerlink" href="#common-pitfalls" title="Link to this heading">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BaseSettings</span></code>: If you’re prepending <code class="docutils literal notranslate"><span class="pre">Base</span></code> to a class, don’t. This will just confuse later programmers, and serves instead as a suggestion that you need to rename the <em>child</em> classes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ISerializable</span></code>: Just don’t. Type definitions exist, you don’t need to add useless prefixes.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Utilities</span></code>: This is bad because if you’re writing a utilities class, it almost certainly means that you need to refactor those utilities out somewhere closer to where they need to be.</p></li>
</ul>
</section>
<section id="id27">
<h5>Acceptable<a class="headerlink" href="#id27" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">DriveController</span><span class="p">;</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Serializable</span><span class="p">;</span>
</pre></div>
</div>
</section>
<section id="id28">
<h5>Incorrect<a class="headerlink" href="#id28" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">drive_controller</span><span class="p">;</span><span class="w"> </span><span class="c1">// incorrect case</span>
<span class="k">class</span><span class="w"> </span><span class="nc">SerializableData</span><span class="p">;</span><span class="w"> </span><span class="c1">// extraneous descriptor of &quot;Data&quot; added</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Utilities</span><span class="p">;</span><span class="w"> </span><span class="c1">// utilities for what?</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Utils</span><span class="p">;</span><span class="w"> </span><span class="c1">// abbreviation, and also see above</span>
</pre></div>
</div>
</section>
</section>
<section id="struct-and-typedef-names">
<h4>Struct and typedef names<a class="headerlink" href="#struct-and-typedef-names" title="Link to this heading">¶</a></h4>
<p>Structs and typedef types should be named using <code class="docutils literal notranslate"><span class="pre">snake_case</span></code> and suffixed with <code class="docutils literal notranslate"><span class="pre">_t</span></code>.</p>
</section>
</section>
<section id="formatting">
<h3>Formatting<a class="headerlink" href="#formatting" title="Link to this heading">¶</a></h3>
<section id="formatter">
<h4>Formatter<a class="headerlink" href="#formatter" title="Link to this heading">¶</a></h4>
<p>Use <code class="docutils literal notranslate"><span class="pre">clang-formatter</span></code> with <code class="docutils literal notranslate"><span class="pre">-style=file</span></code>. A <code class="docutils literal notranslate"><span class="pre">.clang-format</span></code> file with the following configuration is provided in the root directory of this project.</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">BasedOnStyle</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Google</span>
<span class="nt">UseTab</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Never</span>
<span class="nt">IndentWidth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="nt">TabWidth</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4</span>
<span class="nt">BreakBeforeBraces</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Allman</span>
<span class="nt">AllowShortIfStatementsOnASingleLine</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">IndentCaseLabels</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">ColumnLimit</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<span class="nt">AccessModifierOffset</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">-4</span>
<span class="nt">NamespaceIndentation</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">All</span>
<span class="nt">FixNamespaceComments</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>
<span class="nt">AlignConsecutiveMacros</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</pre></div>
</div>
<p>If you’re using VSCode, either set <code class="docutils literal notranslate"><span class="pre">Clang_format_style</span></code> to <code class="docutils literal notranslate"><span class="pre">file</span></code> (this is the default setting, and is preferred - it will use <code class="docutils literal notranslate"><span class="pre">.clang-format</span></code>), or to the following:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">{</span>
<span class="nt">  BasedOnStyle</span><span class="p">:</span><span class="w"> </span><span class="nv">Google</span><span class="p p-Indicator">,</span>
<span class="nt">  UseTab</span><span class="p">:</span><span class="w"> </span><span class="nv">Never</span><span class="p p-Indicator">,</span>
<span class="nt">  IndentWidth</span><span class="p">:</span><span class="w"> </span><span class="nv">4</span><span class="p p-Indicator">,</span>
<span class="nt">  TabWidth</span><span class="p">:</span><span class="w"> </span><span class="nv">4</span><span class="p p-Indicator">,</span>
<span class="nt">  BreakBeforeBraces</span><span class="p">:</span><span class="w"> </span><span class="nv">Allman</span><span class="p p-Indicator">,</span>
<span class="nt">  AllowShortIfStatementsOnASingleLine</span><span class="p">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span>
<span class="nt">  IndentCaseLabels</span><span class="p">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span>
<span class="nt">  ColumnLimit</span><span class="p">:</span><span class="w"> </span><span class="nv">0</span><span class="p p-Indicator">,</span>
<span class="nt">  AccessModifierOffset</span><span class="p">:</span><span class="w"> </span><span class="nv">-4</span><span class="p p-Indicator">,</span>
<span class="nt">  NamespaceIndentation</span><span class="p">:</span><span class="w"> </span><span class="nv">All</span><span class="p p-Indicator">,</span>
<span class="nt">  FixNamespaceComments</span><span class="p">:</span><span class="w"> </span><span class="nv">false</span><span class="p p-Indicator">,</span>
<span class="nt">  AlignConsecutiveMacros</span><span class="p">:</span><span class="w"> </span><span class="nv">true</span><span class="p p-Indicator">,</span>
<span class="p p-Indicator">}</span>
</pre></div>
</div>
</section>
</section>
<section id="class-design-guidelines">
<h3>Class Design Guidelines<a class="headerlink" href="#class-design-guidelines" title="Link to this heading">¶</a></h3>
<section id="structs-vs-classes">
<h4>Structs vs Classes<a class="headerlink" href="#structs-vs-classes" title="Link to this heading">¶</a></h4>
<p>Structs should be used only for data storage. Adding functions to them is acceptable as long as those functions only serve to perform data conversion to/from other types or provide operators. If you need to do anything else, or need private data fields, you should be using a class instead.</p>
</section>
<section id="always-use-raii-or-riia-and-understand-who-owns-what">
<h4>Always use RAII (or RIIA) and understand who owns what<a class="headerlink" href="#always-use-raii-or-riia-and-understand-who-owns-what" title="Link to this heading">¶</a></h4>
<p>RAII (Resource Acquisition Is Initialisation) is a practice where <em>allocating</em> (or acquiring) a resource also <em>initialises</em> it. This means making use of appropriate constructors, and explicitly forbidding your data from being in invalid states - creating the data <em>forces</em> it to be in a valid state, and it cannot be invalidated until it is no longer needed. Don’t be afraid to use <code class="docutils literal notranslate"> <span class="pre">=delete</span></code> to prevent a constructor or operator from being used! Just be aware of <em>what</em> you’re doing and <em>why</em>.</p>
<p>One of the goals of RAII is to simplify memory/resource ownership - if the memory/resource is locked/used/allocated with the acquisition of a class, then unlocked/released/freed with the destruction of that class, then resource handling is handled simply by variables going in/out of scope.</p>
</section>
<section id="rule-of-three">
<h4>Rule of Three<a class="headerlink" href="#rule-of-three" title="Link to this heading">¶</a></h4>
<p>If you find yourself writing a <em>destructor</em> (<code class="docutils literal notranslate"><span class="pre">~ClassName()</span></code>), copy constructor, or assignment operator, then you almost certainly need to adhere to the <a class="reference external" href="https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three">Rule of Three</a> (or Five) and implement all of them.</p>
<p>If you’re needing to implement the Rule of 3/5, you’re probably managing either pointers or a limited resource. To this end, you probably also need to investigate the <a class="reference external" href="https://stackoverflow.com/questions/3279543/what-is-the-copy-and-swap-idiom">copy-and-swap</a> idiom.</p>
</section>
<section id="separate-inline-method-definitions">
<h4>Separate inline method definitions<a class="headerlink" href="#separate-inline-method-definitions" title="Link to this heading">¶</a></h4>
<p>Don’t define inline methods inside the class.</p>
<section id="id29">
<h5>Correct<a class="headerlink" href="#id29" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">foo</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">bar</span><span class="p">();</span>
<span class="p">};</span>

<span class="kr">inline</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">foo::bar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="don-t-try-to-return-a-reference-when-you-must-return-an-object">
<h4>Don’t try to return a reference when you must return an object<a class="headerlink" href="#don-t-try-to-return-a-reference-when-you-must-return-an-object" title="Link to this heading">¶</a></h4>
<p>References don’t always behave the way you’d expect. The following code will break:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="nf">normalize</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">startPoint</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">normalized</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// ... logic here</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">normalized</span><span class="p">;</span><span class="w">  </span><span class="c1">// this line breaks!</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This happens because the <code class="docutils literal notranslate"><span class="pre">normalized</span></code> variable goes out of scope at the end of the function and gets destroyed, making the returned reference invalid. A solution to this problem is to use smart pointers and dynamically allocate the return value - this may be a valid solution, but it is often better simply to return an object and let the compiler use the copy constructor:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Point</span><span class="w"> </span><span class="nf">normalize</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Point</span><span class="o">&amp;</span><span class="w"> </span><span class="n">startPoint</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">normalized</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// ... logic here</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">normalized</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the variable you are returning will stay alive after the function call ends (such as static variables), then it may be acceptable to do so - just be aware that references don’t force an object to stay in scope.</p>
</section>
<section id="avoid-global-static-class-instances">
<h4>Avoid Global Static Class Instances<a class="headerlink" href="#avoid-global-static-class-instances" title="Link to this heading">¶</a></h4>
<p>Avoid global static class instances because the initialisation order is not guaranteed. If you need a singleton object, use a public static class method named <code class="docutils literal notranslate"><span class="pre">singleton()</span></code> which initializes and returns method-scoped static object. Because the object is <em>static</em>, the reference will remain valid. Ensure the singleton class’ constructor is private to avoid any other way of creating the object. You may also <code class="docutils literal notranslate"><span class="pre">delete</span></code> the constructor instead if it is not needed.</p>
<section id="id30">
<h5>Acceptable<a class="headerlink" href="#id30" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Singleton</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Singleton</span><span class="o">&amp;</span><span class="w"> </span><span class="n">singleton</span><span class="p">()</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="k">static</span><span class="w"> </span><span class="n">Singleton</span><span class="w"> </span><span class="n">singleton</span><span class="p">;</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">singleton</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="n">Singleton</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="don-t-override-new-and-delete">
<h4>Don’t override <code class="docutils literal notranslate"><span class="pre">new</span></code> and <code class="docutils literal notranslate"><span class="pre">delete</span></code><a class="headerlink" href="#don-t-override-new-and-delete" title="Link to this heading">¶</a></h4>
<p>There should be no need to write custom memory management operators. Almost every good reason for doing so is in the context of custom container classes (such as the STL <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> and <code class="docutils literal notranslate"><span class="pre">std::list</span></code> classes).</p>
<p>However, if in the extremely unlikely case that multiple people have agreed that custom memory management is the best solution, follow the following:</p>
<ul class="simple">
<li><p>Always provide <code class="docutils literal notranslate"><span class="pre">new</span></code> and <code class="docutils literal notranslate"><span class="pre">delete</span></code> together</p></li>
<li><p>If you provide any class-specific new, provide all of the standard forms (plain, in-place, and <code class="docutils literal notranslate"><span class="pre">nothrow</span></code>)</p></li>
</ul>
</section>
<section id="pimpl-is-useful-but-unlikely-to-be-necessary">
<h4>Pimpl is useful, but unlikely to be necessary<a class="headerlink" href="#pimpl-is-useful-but-unlikely-to-be-necessary" title="Link to this heading">¶</a></h4>
<p>Pimpl stands for “pointer to implementation”. Specifically, it looks like this:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Example</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="c1">//  public API here</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">   </span><span class="k">class</span><span class="w"> </span><span class="nc">ExampleImpl</span><span class="p">;</span>
<span class="w">   </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">ExampleImpl</span><span class="o">&gt;</span><span class="w"> </span><span class="n">_impl</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>This allows private implementation details (the entire <code class="docutils literal notranslate"><span class="pre">ExampleImpl</span></code> class) to be declared and defined purely inside of source files, thus keeping private details out of header files. It can also reduce compile times, since modification to the implementation of the functionality only requires re-compiling the implementation source and re-linking. However, the advantages provided by this pattern are significantly outweighed by the hit to readability this pattern causes. It may be useful in some cases, but it is unlikely to be needed in ROAR code.</p>
</section>
<section id="prefer-non-member-non-friend-functions-to-member-functions">
<h4>Prefer non-member non-friend functions to member functions<a class="headerlink" href="#prefer-non-member-non-friend-functions-to-member-functions" title="Link to this heading">¶</a></h4>
<p>This one isn’t very well named. In short, it means that if a function doesn’t have to have access to internals of a class, it shouldn’t be part of the class.</p>
</section>
<section id="declare-non-member-functions-when-type-conversion-should-apply-to-all-parameters">
<h4>Declare non-member functions when type conversion should apply to all parameters<a class="headerlink" href="#declare-non-member-functions-when-type-conversion-should-apply-to-all-parameters" title="Link to this heading">¶</a></h4>
<p>This is explained quite well <a class="reference external" href="https://blog.ycshao.com/2017/10/16/effective-c-item-24-declare-non-member-functions-when-type-conversions-should-apply-to-all-parameters/">here</a>. In short, it means that some functions (particularly operators) may need to be declared <em>outside</em> of a class, and use that class as inputs to allow for implicit type conversion.</p>
<section id="example">
<h5>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h5>
<p>Taken from the linked article - it may be tempting to implement code as follows:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Rational</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Rational</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">numerator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">             </span><span class="kt">int</span><span class="w"> </span><span class="n">denominator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">numerator</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">denominator</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">Rational</span><span class="w"> </span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Rational</span><span class="o">&amp;</span><span class="w"> </span><span class="n">rhs</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">_numerator</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">_denominator</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
<p>In most cases, this code will work as expected:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">Rational</span><span class="w"> </span><span class="nf">oneEighth</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">8</span><span class="p">);</span>
<span class="n">Rational</span><span class="w"> </span><span class="nf">two</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="n">Rational</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oneEigth</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">two</span><span class="p">;</span>
<span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">oneEighth</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// this works because 2 gets implicitly converted to a Rational</span>
</pre></div>
</div>
<p>However, it doesn’t always:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">oneEighth</span><span class="p">;</span><span class="w"> </span><span class="c1">// this one breaks!</span>
</pre></div>
</div>
<p>This is because the literal <code class="docutils literal notranslate"><span class="pre">3</span></code> would need to be <em>explicitly</em> converted to a <code class="docutils literal notranslate"><span class="pre">Rational</span></code> before the <code class="docutils literal notranslate"><span class="pre">operator*</span></code> can be applied, since the operator is defined <em>inside</em> the <code class="docutils literal notranslate"><span class="pre">Rational</span></code> class (thus specifying the LHS type). Moving the operator definition out to be a non-member function fixes this behaviour, as now operands on <em>both</em> sides of the operator can be implicitly converted:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Rational</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">Rational</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">numerator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">             </span><span class="kt">int</span><span class="w"> </span><span class="n">denominator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">numerator</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="nf">denominator</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="p">;</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">_numerator</span><span class="p">;</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">_denominator</span><span class="p">;</span>
<span class="p">};</span>
<span class="c1">// defining this function outside of the class allows implicit conversion of *both* types</span>
<span class="k">const</span><span class="w"> </span><span class="n">Rational</span><span class="w"> </span><span class="k">operator</span><span class="o">*</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">Rational</span><span class="o">&amp;</span><span class="w"> </span><span class="n">lhs</span><span class="p">,</span>
<span class="w">                         </span><span class="k">const</span><span class="w"> </span><span class="n">Rational</span><span class="o">&amp;</span><span class="w"> </span><span class="n">rhs</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">Rational</span><span class="p">(</span><span class="n">lhs</span><span class="p">.</span><span class="n">numerator</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">numerator</span><span class="p">(),</span>
<span class="w">                    </span><span class="n">lhs</span><span class="p">.</span><span class="n">denominator</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">rhs</span><span class="p">.</span><span class="n">denominator</span><span class="p">());</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>
<section id="use-initialiser-lists">
<h4>Use initialiser lists!<a class="headerlink" href="#use-initialiser-lists" title="Link to this heading">¶</a></h4>
<p>Wherever possible, initialise a class’s data using initialiser lists instead of in the constructor body. This has several benefits, such as allowing the initialisation of <code class="docutils literal notranslate"><span class="pre">const</span></code>s with values provided in the constructor.</p>
<section id="id31">
<h5>Correct<a class="headerlink" href="#id31" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">MyClass</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">number1</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">number2</span><span class="p">)</span>
<span class="w">        </span><span class="o">:</span><span class="w"> </span><span class="n">_number1</span><span class="p">(</span><span class="n">number1</span><span class="p">),</span>
<span class="w">          </span><span class="n">_number2</span><span class="p">(</span><span class="n">number2</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">_number1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">_number2</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
<section id="id32">
<h5>Incorrect<a class="headerlink" href="#id32" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">MyClass</span>
<span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
<span class="w">    </span><span class="n">MyClass</span><span class="p">(</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">number1</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">number2</span><span class="p">)</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">        </span><span class="n">_number1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">number1</span><span class="p">;</span>
<span class="w">        </span><span class="n">_number2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">number2</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="k">private</span><span class="o">:</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">_number1</span><span class="p">;</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">_number2</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>
</div>
</section>
</section>
<section id="consider-making-virtual-functions-non-public-and-public-functions-non-virtual">
<h4>Consider making virtual functions non-public, and public functions non-virtual<a class="headerlink" href="#consider-making-virtual-functions-non-public-and-public-functions-non-virtual" title="Link to this heading">¶</a></h4>
<p>If a method is virtual, it is specifying an <em>implementation detail</em>. However, if it is public, it is also specifying the <em>interface</em> with which to use the class - these two things are conflicting.</p>
</section>
<section id="destructors-should-probably-be-virtual">
<h4>Destructors should (probably) be virtual<a class="headerlink" href="#destructors-should-probably-be-virtual" title="Link to this heading">¶</a></h4>
<p>See <a class="reference external" href="http://www.gotw.ca/publications/mill18.htm">Virtuality</a>, specifically that “A base class destructor should be either public and virtual, or protected and nonvirtual.” This means that derived classes can be deleted using pointers to base classes. Ideally you can avoid the need to write a destructor at all, but if you can’t, then be sure that you’ve fully considered the ramifications that doing so brings.</p>
</section>
<section id="consider-support-for-a-non-throwing-swap">
<h4>Consider support for a non-throwing swap<a class="headerlink" href="#consider-support-for-a-non-throwing-swap" title="Link to this heading">¶</a></h4>
<p>If a <code class="docutils literal notranslate"><span class="pre">swap</span></code> function can throw, then it defeats the purpose - if the function throws an exception mid-execution, what state are the inputs left in?</p>
</section>
<section id="avoid-providing-implicit-conversions">
<h4>Avoid providing implicit conversions<a class="headerlink" href="#avoid-providing-implicit-conversions" title="Link to this heading">¶</a></h4>
<p>Although <a class="reference external" href="https://en.cppreference.com/w/cpp/language/implicit_conversion">implicit conversions</a> are convenient, they can also cause insidious hard-to-debug issues when they are called unexpectedly. Implicit conversions have their uses, just think twice before implementing them - will you be potentially introducing bugs later down the line? Would making the conversion <code class="docutils literal notranslate"><span class="pre">explicit</span></code> reduce the opportunities for those bugs?</p>
</section>
</section>
<section id="general-code-guidelines">
<h3>General Code Guidelines<a class="headerlink" href="#general-code-guidelines" title="Link to this heading">¶</a></h3>
<section id="prefer-pass-by-reference-to-const-to-pass-by-value">
<h4>Prefer pass-by-reference-to-const to pass-by-value<a class="headerlink" href="#prefer-pass-by-reference-to-const-to-pass-by-value" title="Link to this heading">¶</a></h4>
<p>If this is not done, it means that values can get <em>copied</em> around, which can have performance hits, especially if the objects being copied are complex classes that need to run copy constructors and/or destructors to do so.</p>
<section id="id33">
<h5>Acceptable<a class="headerlink" href="#id33" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">processClass</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">ExampleClass</span><span class="o">&amp;</span><span class="w"> </span><span class="n">inputData</span><span class="p">);</span>
</pre></div>
</div>
</section>
<section id="id34">
<h5>Incorrect<a class="headerlink" href="#id34" title="Link to this heading">¶</a></h5>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">processClass</span><span class="p">(</span><span class="n">ExampleClass</span><span class="w"> </span><span class="n">inputData</span><span class="p">);</span>
</pre></div>
</div>
</section>
</section>
<section id="memory-management">
<h4>Memory Management<a class="headerlink" href="#memory-management" title="Link to this heading">¶</a></h4>
<p>Never use C <code class="docutils literal notranslate"><span class="pre">malloc()</span></code> and <code class="docutils literal notranslate"><span class="pre">free()</span></code> - there are better C++ replacements. Firstly, prefer to use references if you can (<code class="docutils literal notranslate"><span class="pre">type_t&amp;</span> <span class="pre">variable</span></code>), eliminating pointers entirely. If a pointer doesn’t serve your needs, the next best options (C++ smart pointers) are <code class="docutils literal notranslate"><span class="pre">std::unique_ptr</span></code> for a pointer which is owned in a single place, and <code class="docutils literal notranslate"><span class="pre">std::shared_ptr</span></code> for a pointer which needs to be, well, shared between multiple pieces of code (you can research <a class="reference external" href="https://en.cppreference.com/w/cpp/memory/weak_ptr"><code class="docutils literal notranslate"><span class="pre">std::weak_ptr</span></code></a> in your own time - it’s unlikely to be useful). Smart pointers should be initialised with <code class="docutils literal notranslate"><span class="pre">std::make_unique</span></code> or <code class="docutils literal notranslate"><span class="pre">std::make_shared</span></code> as appropriate - they are drop-in, safer replacements for <code class="docutils literal notranslate"><span class="pre">new</span></code>. Speaking of, avoid the use of <code class="docutils literal notranslate"><span class="pre">new</span></code> and <code class="docutils literal notranslate"><span class="pre">new[]</span></code>. If you <em>must</em> use it, assign the resultant pointer to a smart pointer type as soon as possible. Dynamic array allocation can also be almost entirely replaced with C++ STL storage containers such as <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> (especially with functions like <code class="docutils literal notranslate"><span class="pre">std::vector::emplace_back</span></code>, which will construct the variable appended to the vector).</p>
<p>Finally, you should be avoiding manual memory management at all costs if you can. It’s just very hard to get right, and if it goes wrong, it can cause a whole host of new and interesting bugs to appear. If you can use normal initialisation instead, do so.</p>
</section>
<section id="use-the-stl">
<h4>Use the STL<a class="headerlink" href="#use-the-stl" title="Link to this heading">¶</a></h4>
<p>The STL (Standard Template Library) is <em>massive</em> in modern C++ and contains a huge number of solutions to common problems - the most common likely being <code class="docutils literal notranslate"><span class="pre">std::string</span></code> and <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>. Less well known solutions are libraries such as <code class="docutils literal notranslate"><span class="pre">&lt;atomic&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;chrono&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&lt;tuple&gt;</span></code> - all of which solve common problems well. Before implementing a new solution, take half a minute to do a search and see if the STL has a solution already.</p>
</section>
<section id="when-to-use-auto">
<h4>When to use <code class="docutils literal notranslate"><span class="pre">auto</span></code><a class="headerlink" href="#when-to-use-auto" title="Link to this heading">¶</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">auto</span></code> keyword should only be used in cases where it is explicitly clear what the type is. It is very easy to accidentally perform an implicit cast with <code class="docutils literal notranslate"><span class="pre">auto</span></code> to a type you didn’t intend to use, and as such should be avoided for standard primitives. There are also cases where explicitly specifying the type may result in clearer code - in these cases don’t use it.</p>
<p>Using the STL can result in… interesting… types sometimes - if you don’t particularly care what type the variable <em>is</em> (such as <code class="docutils literal notranslate"><span class="pre">std::vector::begin</span></code>), you may use the <code class="docutils literal notranslate"><span class="pre">auto</span></code> (or <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">auto</span></code>, or <code class="docutils literal notranslate"><span class="pre">auto&amp;</span></code>, or <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">auto&amp;</span></code> as appropriate) keyword instead of specifying the complete type - <strong>but only do this where you know exactly what will happen!</strong> It should only be used in cases where the type is fully specified and the intended use is clear.</p>
</section>
<section id="use-of-exceptions">
<h4>Use of exceptions<a class="headerlink" href="#use-of-exceptions" title="Link to this heading">¶</a></h4>
<p>Exceptions are, as the name suggests, for <em>exceptional</em> behaviour. Before writing code which throws exceptions <em>or</em> returns an error code, read through, at the very least, the first 8 items of the <a class="reference external" href="https://isocpp.org/wiki/faq/exceptions">ISO C++</a> exceptions and error handling page - everything in that document is applicable and should be followed, but the first entries are the most important. The most important points are that exceptions separate the <em>happy path</em> (everything succeeded) from the <em>bad path</em> (errors occured). Exceptions should not be used as another way to return ordinary data from a function - they should be reserved for errors only. Additionally, they should not be used for flow control - this is what if/else statements are for! Your code should both catch “expected” exceptions, and throw exceptions if it encounters <em>unexpected</em> states. Errors which are part of normal operation, however, should perhaps be handled in other ways (eg <code class="docutils literal notranslate"><span class="pre">std::optional</span></code>). Good reasons to throw exceptions are:</p>
<ul class="simple">
<li><p>An error occurs inside a class constructor (<strong>this is what makes RAII possible</strong>)</p></li>
<li><p>A syscall fails (eg <code class="docutils literal notranslate"><span class="pre">open()</span></code> fails)</p></li>
</ul>
<p><em>Potentially</em> valid reasons to throw exceptions, but which require more consideration, are:</p>
<ul class="simple">
<li><p>The function received invalid data (depending on the function and what it’s meant to do, this could be a valid or invalid reason)</p></li>
</ul>
<p><em>Bad</em> reasons to throw exceptions are:</p>
<ul class="simple">
<li><p>An expected and recoverable error occured</p></li>
<li><p>Internal state is corrupted or assumptions are violated (violations of invariants) - this is what <code class="docutils literal notranslate"><span class="pre">assert</span></code> is for!</p></li>
<li><p>You want to return a different data type from your function - use <code class="docutils literal notranslate"><span class="pre">std::variant</span></code> or redesign your code.</p></li>
</ul>
<p>Exceptions should all be derived from the <code class="docutils literal notranslate"><span class="pre">std::exception</span></code> base class. No exceptions (pun intended). You should also <strong>never ever</strong> throw an exception from a class <em>destructor</em> since this causes a whole bunch of nasty behaviour - there’s no good way to handle this happening. Finally, try to make <code class="docutils literal notranslate"><span class="pre">try</span></code>/<code class="docutils literal notranslate"><span class="pre">catch</span></code> blocks as short as is reasonably possible.</p>
</section>
<section id="error-return-and-retrieval">
<h4>Error Return and Retrieval<a class="headerlink" href="#error-return-and-retrieval" title="Link to this heading">¶</a></h4>
<p>Error codes should be provided by an <code class="docutils literal notranslate"><span class="pre">enum</span></code> (or <code class="docutils literal notranslate"><span class="pre">enum</span> <span class="pre">class</span></code> if appropriate), not integers. On this, do not use <code class="docutils literal notranslate"><span class="pre">#define</span></code>s to specify error codes.</p>
<p>Additionally, do not use return codes to specify a function’s success/failure. Either use exceptions to signal that the function failed entirely, or use an appropriate STL type such as <code class="docutils literal notranslate"><span class="pre">std::optional</span></code> to make the function’s operation and usage clear. This both makes intentions clearer <em>and</em> forces programmers to think about error handling explicitly, rather than simply ignoring a return value. However, unless the function’s behaviour is documented, this is useless! Make sure you document all possible return values or exceptions clearly.</p>
</section>
<section id="avoid-define-statements-mostly">
<h4>Avoid <code class="docutils literal notranslate"><span class="pre">#define</span></code> statements (mostly)<a class="headerlink" href="#avoid-define-statements-mostly" title="Link to this heading">¶</a></h4>
<p>While <code class="docutils literal notranslate"><span class="pre">#define</span></code> statements are useful, most of the time it would be better to replace them with an appropriate enum or set of constants inside a class. Additionally, defining macros for simple operations (such as calculating a voltage divider) may also be useful. However, no matter whether it’s an ordinary define statement or a macro, keep in mind that it’s effectively running a find and replace at compile time, which may have unintended consequences in certain situations.</p>
</section>
<section id="use-asserts-liberally">
<h4>Use <code class="docutils literal notranslate"><span class="pre">assert</span></code>s liberally<a class="headerlink" href="#use-asserts-liberally" title="Link to this heading">¶</a></h4>
<p>It is better to have an <code class="docutils literal notranslate"><span class="pre">assert</span></code> clearly specifying assumptions (and throwing errors when things go wrong) than to have later bugs because those assumptions were violated. Just make sure that they don’t have side effects (such as variable assignments) - compiling out <code class="docutils literal notranslate"><span class="pre">assert</span></code>s should not change the code’s functionality.</p>
</section>
<section id="use-c-casts">
<h4>Use C++ casts<a class="headerlink" href="#use-c-casts" title="Link to this heading">¶</a></h4>
<p>The C-style <code class="docutils literal notranslate"><span class="pre">(type)var</span></code> casts can have a vast number of unintended side effects. C++ provides a set of casts which specify your intentions much more explicitly and can be safer to use as well, such as:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">unsigned_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">number</span><span class="p">);</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">static_cast</span></code> is almost certainly the most appropriate for your needs (followed by <code class="docutils literal notranslate"><span class="pre">dynamic_cast</span></code> in the majority of other cases), but if it isn’t, check which one would be best suited to your needs - <a class="reference external" href="https://cplusplus.com/doc/tutorial/Typecasting/">this</a> article provides a good explanation of the different types of casting and their side effects.</p>
</section>
</section>
<section id="id35">
<h3>Types<a class="headerlink" href="#id35" title="Link to this heading">¶</a></h3>
<section id="use-typedef">
<h4>Use <code class="docutils literal notranslate"><span class="pre">typedef</span></code><a class="headerlink" href="#use-typedef" title="Link to this heading">¶</a></h4>
<p>If using <code class="docutils literal notranslate"><span class="pre">typedef</span></code> to alias types in the STL, functions, or complex types makes things simpler or easier to understand, do so.</p>
</section>
<section id="use-meaningful-types">
<h4>Use meaningful types<a class="headerlink" href="#use-meaningful-types" title="Link to this heading">¶</a></h4>
<p>Types can convey important information about your intentions. For example:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">size_t</span></code> conveys that it’s an unsigned integer size/length of something</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::chrono::duration</span></code> is explicitly a duration between two points</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::optional</span></code> is explicitly a value which may or may not exist
These are just a few examples, but in short, consider whether the type you’re using conveys the information that it should, and if it doesn’t, check to see if there isn’t a better suited type.</p></li>
</ul>
</section>
<section id="integer-types">
<h4>Integer types<a class="headerlink" href="#integer-types" title="Link to this heading">¶</a></h4>
<p>Use the standard integer types in <code class="docutils literal notranslate"><span class="pre">&lt;cstdint&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;climit&gt;</span></code>. Prefer to explicitly state the size of the type - that is, prefer <code class="docutils literal notranslate"><span class="pre">int64_t</span></code> over <code class="docutils literal notranslate"><span class="pre">long</span></code>, or <code class="docutils literal notranslate"><span class="pre">uint8_t</span></code> over <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">char</span></code>.</p>
<ul class="simple">
<li><p>Use <code class="docutils literal notranslate"><span class="pre">size_t</span></code> for unsigned integer types denoting length, size, or capacity.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">ssize_t</span></code> when you need a <em>signed</em> integer type for the same reasons, but where a negative value may be returned on an error (do not <em>write</em> code that does this! See above about error handling, only use this when libraries return it).</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">off_t</span></code> for file positions and offsets.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">ptrdiff_t</span></code> for integers representing offset or difference between pointers.</p></li>
</ul>
</section>
</section>
</section>
<section id="python-standards">
<h2>Python Standards<a class="headerlink" href="#python-standards" title="Link to this heading">¶</a></h2>
<p>Just follow the conventions in <a class="reference external" href="https://peps.python.org/pep-0008">PEP 8</a>. A couple of the most important notes are:</p>
<ul class="simple">
<li><p>Classes: <code class="docutils literal notranslate"><span class="pre">PascalCase</span></code></p></li>
<li><p>Variables: <code class="docutils literal notranslate"><span class="pre">snake_case</span></code> variable names</p></li>
<li><p>4 space indentation</p></li>
</ul>
<p>Everything in the general standards section still applies, and if there is a conflict between PEP 8 and what’s specified in this document, this document takes priority.</p>
<section id="id36">
<h3>Formatting<a class="headerlink" href="#id36" title="Link to this heading">¶</a></h3>
<section id="id37">
<h4>Formatter<a class="headerlink" href="#id37" title="Link to this heading">¶</a></h4>
<p>Use the <em><a class="reference external" href="https://github.com/psf/black">Black</a></em> formatter with default settings.</p>
</section>
</section>
</section>
<section id="ros-standards">
<h2>ROS Standards<a class="headerlink" href="#ros-standards" title="Link to this heading">¶</a></h2>
<section id="packages">
<h3>Packages<a class="headerlink" href="#packages" title="Link to this heading">¶</a></h3>
<p>Packages should contain a set of related nodes/launch files with similar responsibilities. For example, an <code class="docutils literal notranslate"><span class="pre">input_devices</span></code> package could contain nodes related to taking input from various devices and publishing that to the correct topics. Package names should not be prepended with anything (eg <code class="docutils literal notranslate"><span class="pre">rover_</span></code>) without a very good reason (such as a “meta-package” containing launch files).</p>
</section>
<section id="nodes">
<h3>Nodes<a class="headerlink" href="#nodes" title="Link to this heading">¶</a></h3>
<p>Nodes should be named as <em>nouns</em> according to what they <em>are</em>. Node names <strong>should not</strong> be appended with <code class="docutils literal notranslate"><span class="pre">_node</span></code>.</p>
<section id="id38">
<h4>Acceptable<a class="headerlink" href="#id38" title="Link to this heading">¶</a></h4>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">input_devices</span><span class="w"> </span><span class="n">generic_controller</span>
<span class="n">input_devices</span><span class="w"> </span><span class="n">hotas_controller</span>
<span class="n">input_devices</span><span class="w"> </span><span class="n">joystick_controller</span>
<span class="n">input_controller</span><span class="w"> </span><span class="n">input_controller</span>

<span class="n">autonomy</span><span class="w"> </span><span class="n">costmap</span>
<span class="n">autonomy</span><span class="w"> </span><span class="n">lidar</span>
<span class="n">autonomy</span><span class="w"> </span><span class="n">mapper</span>
</pre></div>
</div>
</section>
</section>
<section id="launch-files">
<h3>Launch Files<a class="headerlink" href="#launch-files" title="Link to this heading">¶</a></h3>
<p>Launch files should be clearly named and handle errors appropriately. Config inputs should be clearly documented.</p>
</section>
<section id="data-transfer">
<h3>Data transfer<a class="headerlink" href="#data-transfer" title="Link to this heading">¶</a></h3>
<section id="id39">
<h4>Naming<a class="headerlink" href="#id39" title="Link to this heading">¶</a></h4>
<p>The following applies to topics, services, and actions, but will name topics specifically for brevity.</p>
<p>Topics should be named hierarchically, typically with the first level of the name being the name of the package the node is in. For example, a node under <code class="docutils literal notranslate"><span class="pre">input_devices</span></code> might publish to <code class="docutils literal notranslate"><span class="pre">/input_devices/generic_controller</span></code>, or a node under autonomy might publish to <code class="docutils literal notranslate"><span class="pre">/autonomy/point_cloud</span></code>.</p>
</section>
<section id="general">
<h4>General<a class="headerlink" href="#general" title="Link to this heading">¶</a></h4>
<p>If there’s an appropriate pre-existing ROS message type, use it. This simplifies development and also allows for greater interoperability with other pre-existing ROS software.</p>
</section>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="../maintenance/README.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Maintenance</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="electronics.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Electronics Design Guidelines</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 1980, ROAR Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Software Standards</a><ul>
<li><a class="reference internal" href="#general-software-standards">General Software Standards</a><ul>
<li><a class="reference internal" href="#general-naming">General Naming</a><ul>
<li><a class="reference internal" href="#spelling">Spelling</a></li>
<li><a class="reference internal" href="#abbreviations">Abbreviations</a><ul>
<li><a class="reference internal" href="#acceptable">Acceptable</a></li>
<li><a class="reference internal" href="#incorrect">Incorrect</a></li>
<li><a class="reference internal" href="#exceptions">Exceptions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#units-in-variable-names">Units in variable names</a></li>
<li><a class="reference internal" href="#descriptiveness">Descriptiveness</a><ul>
<li><a class="reference internal" href="#id1">Acceptable</a></li>
<li><a class="reference internal" href="#id2">Incorrect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#booleans">Booleans</a><ul>
<li><a class="reference internal" href="#id3">Acceptable</a></li>
<li><a class="reference internal" href="#id4">Incorrect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#constants">Constants</a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-methods-and-variables">Class Methods and Variables</a><ul>
<li><a class="reference internal" href="#class-method-names">Class method names</a><ul>
<li><a class="reference internal" href="#id5">Acceptable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#visibility">Visibility</a><ul>
<li><a class="reference internal" href="#correct">Correct</a></li>
</ul>
</li>
<li><a class="reference internal" href="#member-ordering">Member Ordering</a><ul>
<li><a class="reference internal" href="#public">Public</a></li>
<li><a class="reference internal" href="#private">Private</a></li>
<li><a class="reference internal" href="#id6">Correct</a></li>
</ul>
</li>
<li><a class="reference internal" href="#private-methods-and-variables">Private Methods and Variables</a><ul>
<li><a class="reference internal" href="#id7">Acceptable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#mutators-and-accessors">Mutators and Accessors</a><ul>
<li><a class="reference internal" href="#id8">Acceptable</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#scoping">Scoping</a><ul>
<li><a class="reference internal" href="#globals">Globals</a></li>
<li><a class="reference internal" href="#class-data-members">Class data members</a></li>
</ul>
</li>
<li><a class="reference internal" href="#files">Files</a><ul>
<li><a class="reference internal" href="#naming">Naming</a></li>
<li><a class="reference internal" href="#single-responsibility-principle">Single Responsibility Principle</a></li>
<li><a class="reference internal" href="#modules">Modules</a></li>
<li><a class="reference internal" href="#extensions">Extensions</a><ul>
<li><a class="reference internal" href="#id9">Correct</a></li>
<li><a class="reference internal" href="#id10">Incorrect</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#types">Types</a><ul>
<li><a class="reference internal" href="#enums">Enums</a><ul>
<li><a class="reference internal" href="#id11">Acceptable</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#design-guidelines">Design Guidelines</a><ul>
<li><a class="reference internal" href="#versioning">Versioning</a></li>
<li><a class="reference internal" href="#warnings-are-not-acceptable">Warnings are not acceptable</a></li>
<li><a class="reference internal" href="#keep-functions-short">Keep functions short</a></li>
<li><a class="reference internal" href="#make-everything-const">Make everything <code class="docutils literal notranslate"><span class="pre">const</span></code></a></li>
<li><a class="reference internal" href="#prefer-composition-to-inheritance">Prefer composition to inheritance</a></li>
<li><a class="reference internal" href="#prefer-providing-abstract-interfaces">Prefer providing abstract interfaces</a></li>
<li><a class="reference internal" href="#make-interfaces-easy-to-use-and-hard-to-use-incorrectly">Make interfaces easy to use and hard to use incorrectly</a></li>
<li><a class="reference internal" href="#prefer-minimal-classes-over-monolithic-classes">Prefer minimal classes over monolithic classes</a></li>
<li><a class="reference internal" href="#be-clear-what-kind-of-class-you-re-writing">Be clear what kind of class you’re writing</a></li>
<li><a class="reference internal" href="#treat-class-design-as-type-design">Treat class design as type design</a></li>
<li><a class="reference internal" href="#avoid-inheriting-from-classes-that-were-not-designed-to-be-base-classes">Avoid inheriting from classes that were not designed to be base classes</a></li>
<li><a class="reference internal" href="#public-inheritance-models-is-a">Public inheritance models “is a”</a></li>
<li><a class="reference internal" href="#public-inheritance-is-substitutability">Public inheritance is substitutability</a></li>
<li><a class="reference internal" href="#private-inheritance-models-is-implemented-in-terms-of">Private inheritance models “is implemented in terms of”</a></li>
<li><a class="reference internal" href="#don-t-give-away-your-internals">Don’t give away your internals</a></li>
<li><a class="reference internal" href="#practise-safe-overriding">Practise safe overriding</a></li>
<li><a class="reference internal" href="#prefer-simple-code-over-clever-code">Prefer simple code over “clever” code</a></li>
<li><a class="reference internal" href="#use-sensible-defaults">Use sensible defaults</a></li>
<li><a class="reference internal" href="#avoid-magic-numbers">Avoid magic numbers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#documentation">Documentation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#c-standards">C++ Standards</a><ul>
<li><a class="reference internal" href="#header-files">Header Files</a><ul>
<li><a class="reference internal" href="#use-c-includes-over-the-c-includes">Use C++ includes over the C includes</a><ul>
<li><a class="reference internal" href="#id12">Correct</a></li>
<li><a class="reference internal" href="#id13">Incorrect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#include-types">Include types</a></li>
<li><a class="reference internal" href="#assume-nothing">Assume nothing</a><ul>
<li><a class="reference internal" href="#id14">Correct</a></li>
<li><a class="reference internal" href="#id15">Incorrect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#don-t-pollute-the-namespace">Don’t pollute the namespace</a><ul>
<li><a class="reference internal" href="#id16">Correct</a></li>
<li><a class="reference internal" href="#id17">Incorrect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#use-include-guards">Use include guards</a><ul>
<li><a class="reference internal" href="#id18">Correct</a></li>
<li><a class="reference internal" href="#id19">Incorrect</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#id20">Files</a><ul>
<li><a class="reference internal" href="#file-system-structure">File System Structure</a></li>
</ul>
</li>
<li><a class="reference internal" href="#variable-declarations-and-naming-standards">Variable Declarations and Naming Standards</a><ul>
<li><a class="reference internal" href="#capitalisation">Capitalisation</a></li>
<li><a class="reference internal" href="#variable-type-declarations">Variable Type Declarations</a></li>
<li><a class="reference internal" href="#id21">Scoping</a><ul>
<li><a class="reference internal" href="#id22">Correct</a><ul>
<li><a class="reference internal" href="#settings-cpp">settings.cpp</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id23">Incorrect</a><ul>
<li><a class="reference internal" href="#id24">settings.cpp</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#namespaces">Namespaces</a><ul>
<li><a class="reference internal" href="#id25">Acceptable</a></li>
<li><a class="reference internal" href="#id26">Incorrect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-names">Class names</a><ul>
<li><a class="reference internal" href="#common-pitfalls">Common Pitfalls</a></li>
<li><a class="reference internal" href="#id27">Acceptable</a></li>
<li><a class="reference internal" href="#id28">Incorrect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#struct-and-typedef-names">Struct and typedef names</a></li>
</ul>
</li>
<li><a class="reference internal" href="#formatting">Formatting</a><ul>
<li><a class="reference internal" href="#formatter">Formatter</a></li>
</ul>
</li>
<li><a class="reference internal" href="#class-design-guidelines">Class Design Guidelines</a><ul>
<li><a class="reference internal" href="#structs-vs-classes">Structs vs Classes</a></li>
<li><a class="reference internal" href="#always-use-raii-or-riia-and-understand-who-owns-what">Always use RAII (or RIIA) and understand who owns what</a></li>
<li><a class="reference internal" href="#rule-of-three">Rule of Three</a></li>
<li><a class="reference internal" href="#separate-inline-method-definitions">Separate inline method definitions</a><ul>
<li><a class="reference internal" href="#id29">Correct</a></li>
</ul>
</li>
<li><a class="reference internal" href="#don-t-try-to-return-a-reference-when-you-must-return-an-object">Don’t try to return a reference when you must return an object</a></li>
<li><a class="reference internal" href="#avoid-global-static-class-instances">Avoid Global Static Class Instances</a><ul>
<li><a class="reference internal" href="#id30">Acceptable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#don-t-override-new-and-delete">Don’t override <code class="docutils literal notranslate"><span class="pre">new</span></code> and <code class="docutils literal notranslate"><span class="pre">delete</span></code></a></li>
<li><a class="reference internal" href="#pimpl-is-useful-but-unlikely-to-be-necessary">Pimpl is useful, but unlikely to be necessary</a></li>
<li><a class="reference internal" href="#prefer-non-member-non-friend-functions-to-member-functions">Prefer non-member non-friend functions to member functions</a></li>
<li><a class="reference internal" href="#declare-non-member-functions-when-type-conversion-should-apply-to-all-parameters">Declare non-member functions when type conversion should apply to all parameters</a><ul>
<li><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li><a class="reference internal" href="#use-initialiser-lists">Use initialiser lists!</a><ul>
<li><a class="reference internal" href="#id31">Correct</a></li>
<li><a class="reference internal" href="#id32">Incorrect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#consider-making-virtual-functions-non-public-and-public-functions-non-virtual">Consider making virtual functions non-public, and public functions non-virtual</a></li>
<li><a class="reference internal" href="#destructors-should-probably-be-virtual">Destructors should (probably) be virtual</a></li>
<li><a class="reference internal" href="#consider-support-for-a-non-throwing-swap">Consider support for a non-throwing swap</a></li>
<li><a class="reference internal" href="#avoid-providing-implicit-conversions">Avoid providing implicit conversions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#general-code-guidelines">General Code Guidelines</a><ul>
<li><a class="reference internal" href="#prefer-pass-by-reference-to-const-to-pass-by-value">Prefer pass-by-reference-to-const to pass-by-value</a><ul>
<li><a class="reference internal" href="#id33">Acceptable</a></li>
<li><a class="reference internal" href="#id34">Incorrect</a></li>
</ul>
</li>
<li><a class="reference internal" href="#memory-management">Memory Management</a></li>
<li><a class="reference internal" href="#use-the-stl">Use the STL</a></li>
<li><a class="reference internal" href="#when-to-use-auto">When to use <code class="docutils literal notranslate"><span class="pre">auto</span></code></a></li>
<li><a class="reference internal" href="#use-of-exceptions">Use of exceptions</a></li>
<li><a class="reference internal" href="#error-return-and-retrieval">Error Return and Retrieval</a></li>
<li><a class="reference internal" href="#avoid-define-statements-mostly">Avoid <code class="docutils literal notranslate"><span class="pre">#define</span></code> statements (mostly)</a></li>
<li><a class="reference internal" href="#use-asserts-liberally">Use <code class="docutils literal notranslate"><span class="pre">assert</span></code>s liberally</a></li>
<li><a class="reference internal" href="#use-c-casts">Use C++ casts</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id35">Types</a><ul>
<li><a class="reference internal" href="#use-typedef">Use <code class="docutils literal notranslate"><span class="pre">typedef</span></code></a></li>
<li><a class="reference internal" href="#use-meaningful-types">Use meaningful types</a></li>
<li><a class="reference internal" href="#integer-types">Integer types</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#python-standards">Python Standards</a><ul>
<li><a class="reference internal" href="#id36">Formatting</a><ul>
<li><a class="reference internal" href="#id37">Formatter</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#ros-standards">ROS Standards</a><ul>
<li><a class="reference internal" href="#packages">Packages</a></li>
<li><a class="reference internal" href="#nodes">Nodes</a><ul>
<li><a class="reference internal" href="#id38">Acceptable</a></li>
</ul>
</li>
<li><a class="reference internal" href="#launch-files">Launch Files</a></li>
<li><a class="reference internal" href="#data-transfer">Data transfer</a><ul>
<li><a class="reference internal" href="#id39">Naming</a></li>
<li><a class="reference internal" href="#general">General</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../_static/collapsible-lists/js/CollapsibleLists.compressed.js?v=73120307"></script>
    <script src="../_static/collapsible-lists/js/apply-collapsible-lists.js?v=660e4f45"></script>
    </body>
</html>