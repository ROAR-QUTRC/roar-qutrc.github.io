
.. highlight:: none




.. _program_listing_file_software_shared_hi-can-raw_include_hi_can_raw.hpp:

Program Listing for File hi_can_raw.hpp
=======================================

|exhale_lsh| :ref:`Return to documentation for file <file_software_shared_hi-can-raw_include_hi_can_raw.hpp>` (``software/shared/hi-can-raw/include/hi_can_raw.hpp``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   #pragma once
   
   #include <fd_wrapper.hpp>
   #include <hi_can.hpp>
   #include <string>
   
   namespace hi_can
   {
       class RawCanInterface : public FilteredCanInterface
       {
       public:
           // note: Providing a default parameter allows the move constructor to work without an explicit default constructor
           RawCanInterface(const std::string& interface_name = "any");
           // copy constructor
           RawCanInterface(const RawCanInterface& other);
           // move constructor
           RawCanInterface(RawCanInterface&& other) noexcept;
           // copy assignment
           RawCanInterface& operator=(RawCanInterface other);
   
           friend void swap(RawCanInterface& first, RawCanInterface& second) noexcept
           {
               using std::swap;
               swap(first._filters, second._filters);
               swap(first._interface_name, second._interface_name);
               swap(first._socket, second._socket);
           }
   
           void transmit(const Packet& packet) override;
           std::optional<Packet> receive(bool blocking = false) override;
   
           RawCanInterface& add_filter(const addressing::filter_t& address) override;
           RawCanInterface& remove_filter(const addressing::filter_t& address) override;
   
       private:
           static int _create_socket();
           void _configure_socket(const int& socket);
           void _update_filters();
   
           // note: NOT const to allow for copy-and-swap
           std::string _interface_name{};
           FdWrapper _socket;
       };
   }
