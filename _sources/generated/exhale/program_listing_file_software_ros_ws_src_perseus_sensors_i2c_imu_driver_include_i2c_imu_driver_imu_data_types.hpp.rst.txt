
.. highlight:: none




.. _program_listing_file_software_ros_ws_src_perseus_sensors_i2c_imu_driver_include_i2c_imu_driver_imu_data_types.hpp:

Program Listing for File imu_data_types.hpp
===========================================

|exhale_lsh| :ref:`Return to documentation for file <file_software_ros_ws_src_perseus_sensors_i2c_imu_driver_include_i2c_imu_driver_imu_data_types.hpp>` (``software/ros_ws/src/perseus_sensors/i2c_imu_driver/include/i2c_imu_driver/imu_data_types.hpp``)

.. |exhale_lsh| unicode:: U+021B0 .. UPWARDS ARROW WITH TIP LEFTWARDS

.. code-block:: cpp

   #pragma once
   
   #include <chrono>
   
   namespace i2c_imu_driver
   {
   
       struct ImuData
       {
           std::chrono::steady_clock::time_point timestamp;
   
           // Linear acceleration (m/s²)
           double accel_x{0.0};
           double accel_y{0.0};
           double accel_z{0.0};
   
           // Angular velocity (rad/s)
           double gyro_x{0.0};
           double gyro_y{0.0};
           double gyro_z{0.0};
   
           // Temperature (°C)
           double temperature{0.0};
       };
   
       inline ImuData apply_calibration(
           const ImuData& raw_data,
           double accel_scale_x, double accel_scale_y, double accel_scale_z,
           double accel_offset_x, double accel_offset_y, double accel_offset_z,
           double gyro_scale_x, double gyro_scale_y, double gyro_scale_z,
           double gyro_offset_x, double gyro_offset_y, double gyro_offset_z)
       {
           ImuData calibrated_data = raw_data;
   
           // Apply calibration to accelerometer data: calibrated = (raw - offset) * scale
           calibrated_data.accel_x = (raw_data.accel_x - accel_offset_x) * accel_scale_x;
           calibrated_data.accel_y = (raw_data.accel_y - accel_offset_y) * accel_scale_y;
           calibrated_data.accel_z = (raw_data.accel_z - accel_offset_z) * accel_scale_z;
   
           // Apply calibration to gyroscope data: calibrated = (raw - offset) * scale
           calibrated_data.gyro_x = (raw_data.gyro_x - gyro_offset_x) * gyro_scale_x;
           calibrated_data.gyro_y = (raw_data.gyro_y - gyro_offset_y) * gyro_scale_y;
           calibrated_data.gyro_z = (raw_data.gyro_z - gyro_offset_z) * gyro_scale_z;
   
           return calibrated_data;
       }
   
   }  // namespace i2c_imu_driver
